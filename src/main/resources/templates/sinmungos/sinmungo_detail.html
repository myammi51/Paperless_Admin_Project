<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>민원 상세</title>
  <link rel="stylesheet" th:href="@{/admin/css/admin.css}" />
  <link rel="stylesheet" th:href="@{/sinmungo/css/sinmungo.css}" />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>

<body>
  <div class="container">
    <header th:replace="~{fragments/topbar :: topbar}"></header>
    <aside th:replace="~{fragments/sidebar :: sidebar}"></aside>

    <main class="main" role="main">
      <h1 class="page-title">민원 #1023 · 노면파손 보수 요청</h1>

      <div class="card section">
        <dl class="meta-card"
          style="display:grid; grid-template-columns: 100px 1fr; row-gap:6px; column-gap:8px; margin:0;">
          <dt style="color:#64748b;">신청인</dt>
          <dd>홍길동 (010-1234-5678)</dd>
          <dt style="color:#64748b;">접수일</dt>
          <dd>2025-09-08 09:24</dd>
          <dt style="color:#64748b;">카테고리</dt>
          <dd>도로</dd>
          <dt style="color:#64748b;">처리기한</dt>
          <dd>2025-09-12 (D-2)</dd>
          <dt style="color:#64748b;">상태</dt>
          <dd><span class="badge badge--pending">대기</span></dd>
          <dt style="color:#64748b;">담당자</dt>
          <dd>김담당</dd>
          <dt style="color:#64748b;">우선순위</dt>
          <dd><span class="badge">보통</span></dd>
        </dl>
      </div>

      <div class="card section">
        <h2 class="page-title" style="font-size:16px;">본문</h2>
        <p>도로 노면이 파손되어 차량 통행에 위험이 있어 보수 요청드립니다. 위치는 서울 ○○구 ○○로 12입니다.</p>
        <div class="section">
          <h3 class="page-title" style="font-size:15px;">첨부파일</h3>
          <ul class="attach-list">
            <li><a href="">photo_001.jpg</a></li>
            <li><a href="">location.pdf</a></li>
          </ul>
        </div>
      </div>

      <div class="card section">
        <h2 class="page-title" style="font-size:16px;">내부 처리 메모</h2>
        <textarea class="textarea" placeholder="처리 메모를 남겨주세요."></textarea>
        <div class="section" style="display:flex; flex-wrap:wrap; gap:8px;">
          <select class="select">
            <option>담당자 변경</option>
            <option>박담당</option>
            <option>이담당</option>
            <option>최담당</option>
          </select>
          <select class="select">
            <option>우선순위 변경</option>
            <option>낮음</option>
            <option selected>보통</option>
            <option>높음</option>
            <option>긴급</option>
          </select>
        </div>
      </div>

      <div class="card section">
        <h2 class="page-title" style="font-size:16px;">시민 답변(발송용)</h2>
        <textarea class="textarea" placeholder="시민에게 발송할 답변을 작성하세요."></textarea>
        <div class="section" style="display:flex; gap:8px; flex-wrap:wrap;">
          <button class="btn">미리보기</button>
          <button class="btn">발송</button>
        </div>
      </div>

      <div class="actions section actions-bar">
        <div class="left">
          <a class="btn" href="/admin/sinmungo_list">목록으로</a>
        </div>
        <div class="center">
          <button class="btn primary" onclick="return decide('approve')">승인</button>
          <button class="btn warn" onclick="return decide('reject')">반려</button>
          <button class="btn danger" onclick="return decide('cancel')">취소</button>
        </div>
        <div></div>
      </div>
    </main>
  </div>

  <script>
    (function () {
      var links = document.querySelectorAll('.nav a');
      links.forEach(a => a.classList.remove('active'));
      var current = document.querySelector('.nav a[href="/complaints"]');
      if (current) current.classList.add('active');
    })();

    function decide(action) {
      let msg = '';
      if (action === 'approve') msg = '해당 민원을 승인 처리하시겠습니까?';
      if (action === 'reject') msg = '해당 민원을 반려하시겠습니까?';
      if (action === 'cancel') msg = '해당 민원을 취소하시겠습니까?';
      if (!confirm(msg)) return false;
      alert('요청이 처리되었습니다. [' + action + ']');
      return false;
    }
  </script>
</body>

</html>